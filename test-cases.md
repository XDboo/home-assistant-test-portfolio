# Home Assistant 辅助元素(开关)模块 - 测试用例

## 1. UI 层面测试

| 用例编号 | 模块 | 用例标题 | 前置条件 | 测试步骤 | 预期结果 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **TC-UI-SW-CREATE-001** | 创建 | **【正向-核心】** 成功创建最简单的开关 | 进入“配置->辅助元素” | 1. 点击“+ 创建辅助元素”。<br>2. 选择“开关”。<br>3. 名称输入 `测试开关01`。<br>4. 点击“创建”。 | 1. 成功创建，列表出现`测试开关01`。<br>2. “概览”页自动出现对应卡片，默认状态为“关”。 |
| **TC-UI-SW-CREATE-003** | 创建 | **【负向-校验】** 名称为空时无法创建 | 同上 | 1. 创建开关。<br>2. 不输入名称。<br>3. 观察“创建”按钮。 | “创建”按钮为灰色，不可点击。 |
| **TC-UI-SW-CREATE-005** | 创建 | **【边界-UI】** 使用超长名称创建 | 同上 | 1. 创建开关。<br>2. 名称输入100个字符 `aaaaaaaa...`。<br>3. 点击“创建”。 | 1. 成功创建。<br>2. 在列表和卡片上，名称显示正常（自动换行或以...结尾），不破坏UI布局。 |
| **TC-UI-SW-DELETE-001** | 删除 | **【正向-核心】** 成功删除开关 | 已创建`测试开关01` | 1. 编辑`测试开关01`。<br>2. 点击“删除”。<br>3. 在确认弹窗中，点击“删除”。 | 1. 开关从“辅助元素”列表中消失。<br>2. 对应的卡片从“概览”页消失。 |

## 2. API 层面测试 (Postman)

| 用例编号 | 模块 | 用例标题 | 请求方法 | URL | Body | 预期结果 |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| **TC-API-SW-USE-001** | 使用 | **【正向】** 通过API打开开关 | `POST` | `/api/services/input_boolean/turn_on` | `{ "entity_id": "..." }` | 响应码 `200 OK`，开关UI状态变为`on`。 |
| **TC-API-SW-USE-002** | 使用 | **【正向】** 通过API获取开关状态 | `GET` | `/api/states/input_boolean.xxx` | (无) | 响应码 `200 OK`，返回的JSON中包含正确的`state`。 |
| **TC-API-SW-AUTH-001** | 认证 | **【负向】** 使用无效Token调用 | `POST` | `/api/services/input_boolean/turn_on` | `{ "entity_id": "..." }` | 响应码 `401 Unauthorized`。 |